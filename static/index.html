<html ng-app>
  <head>
    <script src="http://cdn.socket.io/socket.io-1.0.2.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.10/angular.min.js"></script>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="lib/jquery.cookie.js"></script>
    <script src="client.js"></script>
    <title>MP3 Downloader</title>
  </head>
  <body ng-controller="MainCtrl">
    <h1>MP3 Downloader</h1>

    <p ng-if="!connected">Not Connected</p>

    <em>Enter a YouTube URL</em>
    <form>
      <input ng-model="formUrl" type="url"></input>
      <button ng-click="queueDownload()">Get</button>
    </form>

    <div ng-repeat="download in downloads">
      <h3 ng-if="download.status == 'Ready'">
        <a href="/download/{{download._id}}">{{download.metadata.artist}} - {{download.metadata.title}}.mp3</a>
      </h3>
      <h3 ng-if="download.status != 'Ready'">{{download.url}} ({{download.status}})</h3>
      <div class="mp3-metadata" ng-if="download.metadata">
        <h4>Metadata</h4>
        <div ng-repeat="(key, value) in download.metadata">
          <label>{{key}}</label>
          <input type="text" ng-model="download.metadata[key]" ng-change="metadataChanged(download)"></input>
        </div>
      </div>
    </div>
  </body>
</html>